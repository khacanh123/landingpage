{"version":3,"sources":["web/pages/Login.js","web/firebase.js"],"names":["LoginPage","props","useState","listUser","setListUser","code","setCode","password","setPassword","useEffect","a","firebase","database","ref","on","snapshot","todos","val","todoList","id","push","getuser","history","useHistory","className","htmlFor","login","type","name","onChange","e","target","value","onClick","message","error","localStorage","setItem","window","location","href","check","map","key","index","mssv","pass","token","jwt","sign","exp","Math","floor","Date","now","data","hoten","success","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics"],"mappings":"ugBAwFeA,UAjFG,SAACC,GACjB,MAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAwBF,mBAAS,IAAjC,mBAAOG,EAAP,KAAaC,EAAb,KACA,EAAgCJ,mBAAS,IAAzC,mBAAOK,EAAP,KAAiBC,EAAjB,KAEAC,qBAAU,YACK,uCAAG,sBAAAC,EAAA,sEACQC,IAASC,WAAWC,IAAI,WADhC,cAENC,GAAG,SAAS,SAACC,GACpB,IAAMC,EAAQD,EAASE,MACjBC,EAAW,GACjB,IAAK,IAAIC,KAAMH,EACPE,EAASE,KAAT,aAAgBD,MAAOH,EAAMG,KAErCf,EAAYc,MARC,2CAAH,qDAWbG,KACA,IACF,IAAMC,EAAUC,cAoCd,OACI,qBAAKJ,GAAG,QAAR,SACN,qBAAKK,UAAU,YAAf,SACE,qBAAKL,GAAG,YAAYK,UAAU,gDAA9B,SACE,qBAAKL,GAAG,eAAeK,UAAU,WAAjC,SACE,sBAAKL,GAAG,YAAYK,UAAU,YAA9B,UACI,oBAAIA,UAAU,wBAAd,uBACA,sBAAKA,UAAU,aAAf,UACE,wBAAOC,QAAQ,WAAWD,UAAU,YAApC,UAAiE,UAAhBvB,EAAMyB,MAAoB,iCAAkB,6BAA7F,OAAwH,uBACxH,uBAAOC,KAAK,OAAOC,KAAK,WAAWT,GAAG,WAAWU,SAAU,SAACC,GAAD,OAAOxB,EAAQwB,EAAEC,OAAOC,QAAQR,UAAU,oBAEvG,sBAAKA,UAAU,aAAf,UACE,uBAAOC,QAAQ,WAAWD,UAAU,YAApC,iCAAiE,uBACjE,uBAAOG,KAAK,WAAWC,KAAK,WAAWT,GAAG,WAAWU,SAAU,SAACC,GAAD,OAAOtB,EAAYsB,EAAEC,OAAOC,QAAQR,UAAU,oBAE/G,qBAAKA,UAAU,aAAf,SACI,wBAAQA,UAAU,kBAAkBS,QAAyB,UAAhBhC,EAAMyB,MA3B9C,WACjB,MAAY,KAATrB,GAA4B,KAAbE,EACT2B,IAAQC,MAAM,iEAEX,cAAT9B,GAAqC,YAAbE,GACzB6B,aAAaC,QAAQ,UAAW,QACzBC,OAAOC,SAASC,KAAO,UAExBN,IAAQC,MAAM,0BAhCL,WACjB,IAAIM,GAAQ,EACZ,MAAY,KAATpC,GAA4B,KAAbE,EACT2B,IAAQC,MAAM,kEAEvBhC,EAASuC,KAAI,SAACC,EAAKC,GACjB,GAAGD,EAAIE,OAASxC,GAAQsC,EAAIG,OAASvC,EAAS,CAC5C,IAAIwC,EASJ,OARAA,EAAQC,IAAIC,KACV,CAAEC,IAAKC,KAAKC,MAAMC,KAAKC,MAAQ,KAAS,KACxCC,KAAMZ,EAAIa,MAAOX,KAAMF,EAAIE,MA/BrB,aAkCRT,aAAaC,QAAQ,YAAaU,GAClCb,IAAQuB,QAAQ,6CAChBhB,GAAQ,EACDnB,EAAQF,KAAK,gBAIrBqB,EACMP,IAAQC,MAAM,oDADvB,IA+BY,qD,gCC9EhB,8BAcAxB,IAAS+C,cAVY,CACnBC,OAAQ,0CACRC,WAAY,+BACZC,UAAW,eACXC,cAAe,2BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAIjBtD,IAASuD,YACQvD,MAAf","file":"static/js/5.b86e94b4.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './login.css';\r\nimport jwt from 'jsonwebtoken';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { message } from 'antd';\r\nimport firebase from '../firebase';\r\nconst KEY_JWT = '123456789';\r\nconst LoginPage = (props) => {\r\n  const [listUser, setListUser] = useState([]);\r\n  const [code, setCode] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  useEffect(()=>{\r\n    const getuser = async () => {\r\n      const todoRef = await firebase.database().ref('student');\r\n      todoRef.on('value', (snapshot) => {\r\n       const todos = snapshot.val();\r\n       const todoList = [];\r\n       for (let id in todos) {\r\n               todoList.push({ id, ...todos[id] });\r\n       }\r\n       setListUser(todoList);\r\n     });\r\n    }\r\n    getuser();\r\n  },[])\r\n  const history = useHistory();\r\n  const submitForm = () => {\r\n    let check = true;\r\n    if(code === '' || password === ''){\r\n      return message.error('Vui lòng nhập đầy đủ thông tin');\r\n    }\r\n    listUser.map((key, index) => {\r\n      if(key.mssv === code && key.pass === password){\r\n        let token = null;\r\n        token = jwt.sign(\r\n          { exp: Math.floor(Date.now() / 1000) + (60 * 60),\r\n          data: key.hoten, mssv: key.mssv  },\r\n          KEY_JWT\r\n        );\r\n        localStorage.setItem('tokentest', token);\r\n        message.success('Đăng nhập thành công');\r\n        check = false;\r\n        return history.push('/bai-thi')\r\n        \r\n      }\r\n    })\r\n    if(check){\r\n      return message.error('Đăng nhập thất bại');\r\n    }\r\n  }\r\n  const LoginAdmin = () => {\r\n    if(code === '' || password === ''){\r\n      return message.error('Vui lòng nhập đầy đủ thông tin');\r\n    }\r\n    if(code === 'adminHuha' && password === 'test234'){\r\n      localStorage.setItem('isAdmin', 'true');\r\n      return window.location.href = '/admin';\r\n    }else{\r\n     return message.error(\"Sai tài khoản\");\r\n    }\r\n  }\r\n    return(\r\n        <div id=\"login\">\r\n  <div className=\"container\">\r\n    <div id=\"login-row\" className=\"row justify-content-center align-items-center\">\r\n      <div id=\"login-column\" className=\"col-md-6\">\r\n        <div id=\"login-box\" className=\"col-md-12\">\r\n            <h3 className=\"text-center text-info\">Huha Test</h3>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"username\" className=\"text-info\">{props.login === 'admin' ? 'Tên người dùng': 'Mã số sinh viên'}:</label><br />\r\n              <input type=\"text\" name=\"username\" id=\"username\" onChange={(e) => setCode(e.target.value)} className=\"form-control\" />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\" className=\"text-info\">Mật khẩu:</label><br />\r\n              <input type=\"password\" name=\"password\" id=\"password\" onChange={(e) => setPassword(e.target.value)} className=\"form-control\" />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <button className=\"btn btn-primary\" onClick={props.login === 'admin' ? LoginAdmin : submitForm}>Đăng nhập</button>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n    )\r\n}\r\nexport default LoginPage;","import firebase from \"firebase/app\";  \r\nimport 'firebase/storage'\r\nimport 'firebase/analytics'\r\nimport 'firebase/database'\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyCwPtJTNRKzmp6eLwDGgRRA0vMsWoQW1hg\",\r\n  authDomain: \"phuong-f6d83.firebaseapp.com\",\r\n  projectId: \"phuong-f6d83\",\r\n  storageBucket: \"phuong-f6d83.appspot.com\",\r\n  messagingSenderId: \"848745336320\",\r\n  appId: \"1:848745336320:web:c436f66c44f317bd34d2e5\",\r\n  measurementId: \"G-7V4WC826HX\"\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nfirebase.analytics();\r\n  export default firebase;"],"sourceRoot":""}